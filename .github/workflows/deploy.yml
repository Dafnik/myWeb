name: Deploy
on:
  push:
    branches:
      - main

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@master
      - name: Remove not important folders
        run: |
          rm -rf .git/
          rm -rf .github/
          rm -rf .gitignore
          rm -rf gitlab-ci
          rm -rf .idea/
          rm -rf renovate.json
          rm -rf README.md
      - name: Copy folder to remote
        uses: garygrossgarten/github-action-scp@release
        with:
            local: ./
            remote: /var/www/dafnik
            host: ${{ secrets.SSH_HOST }}
            port: ${{ secrets.SSH_PORT }}
            username: ${{ secrets.SSH_USER }}
            privateKey: ${{ secrets.SSH_PRIVATE_KEY }}
            rmRemote: true